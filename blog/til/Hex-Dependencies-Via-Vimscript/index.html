<!DOCTYPE html>
<html>
<head>
<meta charset='utf-8'>
<meta content='IE=edge,chrome=1' http-equiv='X-UA-Compatible'>
<meta content='width=device-width, initial-scale=1' name='viewport'>
<title>Hex Dependencies via Vimscript</title>
<link href="../../../assets/stylesheets/application.css" rel="stylesheet" />
<link href="//fonts.googleapis.com/css?family=Radley:400,400italic" rel="stylesheet" />
<link href="//fonts.googleapis.com/css?family=Noto+Sans:400,700,400italic,700italic" rel="stylesheet" />
<link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.1/css/font-awesome.min.css" rel="stylesheet" />
<link rel="alternate" type="application/atom+xml" title="Atom Feed" href="/blog/feed.xml" />
</head>
<body class='type-system-traditional'>
<div class='blog-wrapper'>
<nav>
<ul class='nav-left'>
<li class='menu-item'>
<span id='namesake'>Cody Roberts</span>
</li>
</ul>
<ul class='nav-right'>
<li>
<span class='menu-item'>
<a href="/blog">blog</a>
</span>
</li>
<li>
<span class='menu-item'>
<a href="/about">about</a>
</span>
</li>
<li>
<span class='menu-item'>
<a href="/projects">projects</a>
</span>
</li>
<li id='hamburger'>
<span class='menu-item'>
<i class='fa fa-bars'></i>
</span>
</li>
</ul>
</nav>

<div class='post-archive'>
<p class='type'>Articles</p>
<div class='post-archive-item'>
<a href="/blog/article/chowmonger/">Chowmonger (Phoenix & Ember)</a>
</div>
<div class='post-archive-item'>
<a href="/blog/article/ember-data-in-components/">Ember Data & Components</a>
</div>
<div class='post-archive-item'>
<a href="/blog/article/streams-vs-enums/">Streams, Enums, and Protocols!</a>
</div>
<div class='post-archive-item'>
<a href="/blog/article/a-tour-of-phoenix/">A Tour of Phoenix</a>
</div>
<br>
<p class='type'>Today I Learned</p>
<div class='post-archive-item'>
<a href="/blog/til/iex-test-helper/">IEx Test Helper</a>
</div>
<div class='post-archive-item'>
<a href="/blog/til/Hex-Dependencies-Via-Vimscript/">Hex Dependencies via Vimscript</a>
</div>
<div class='post-archive-item'>
<a href="/blog/til/TDD-with-Elixir-and-Neovim/">TDD with Elixir and Neovim</a>
</div>
<div class='post-archive-item'>
<a href="/blog/til/comprehensions/">Elixir Comprehensions</a>
</div>
<div class='post-archive-item'>
<a href="/blog/til/gen-server/">What is GenServer?</a>
</div>
<div class='post-archive-item'>
<a href="/blog/til/elixir-structs/">Elixir Structs</a>
</div>
<div class='post-archive-item'>
<a href="/blog/til/atoms/">Elixir Atoms</a>
</div>
<div class='post-archive-item'>
<a href="/blog/til/squashing-commits/">Squashing Commits</a>
</div>
<div class='post-archive-item'>
<a href="/blog/til/the-reverse-splat/">Ruby's Reverse Splat</a>
</div>
<div class='post-archive-item'>
<a href="/blog/til/railroady-uml-diagrams/">Railroady</a>
</div>
<div class='post-archive-item'>
<a href="/blog/til/embedding-in-ruby/">Embedding C & Rust in Ruby</a>
</div>
<div class='post-archive-item'>
<a href="/blog/til/using-gits-interactive-staging/">Git Interactive</a>
</div>
<div class='post-archive-item'>
<a href="/blog/til/select-random-rails-record/">ActiveRecord Random</a>
</div>
<div class='post-archive-item'>
<a href="/blog/til/manage-multiple-tmux-sessions/">Tmux Sessions</a>
</div>
<div class='post-archive-item'>
<a href="/blog/til/focused-splits/">Focused Splits</a>
</div>

</div>
<div class='post-wrapper'>
<div class='post-header'>
<p class='date'>Sep 30, 2016</p>
<h2>Hex Dependencies via Vimscript</h2>
<hr>
</div>
<div class='post-content'>
<p>I found myself, in (neo)vim as always, adding a library to <code>mix.exs</code>.
I wasn't sure of the current version of said package, so I reached
for a browser to check. I'm not sure why, but it felt so inefficient.</p>

<p>The first thing I did was check the <code>mix hex</code> command. Turns out
theres a <code>mix hex.info [pkg]</code> command that spits out some useful
information about a given hex package. One of the details returned
is the very handy configuration line for <code>mix.exs</code>.</p>

<p>Ding! I'll just use that!</p>

<pre class="highlight viml"><code><span class="k">function</span><span class="p">!</span> GetHexPkgConfig<span class="p">(</span>pkg<span class="p">)</span>
  <span class="k">let</span> @<span class="m">1</span> <span class="p">=</span> system<span class="p">(</span><span class="s2">"mix hex.info "</span> <span class="p">.</span> <span class="nv">a:pkg</span> <span class="p">.</span> <span class="s2">" | grep 'Config:' | awk '{ print $2,$3,$4 }'"</span><span class="p">)</span>
  normal "<span class="m">1</span><span class="k">p</span><span class="p">==</span>
<span class="k">endfunction</span>

command<span class="p">!</span> <span class="p">-</span>nargs<span class="p">=</span><span class="m">1</span> HexC <span class="k">call</span> GetHexPkgConfig<span class="p">(</span><span class="s2">"&lt;args&gt;"</span><span class="p">)</span>

nnoremap <span class="p">&lt;</span>Leader<span class="p">&gt;</span>hc <span class="p">:</span>HexC
</code></pre>

<p>If you don't grok vimscript, no worries, I barely do. The above snippet
creates a <code>HexC</code> Ex command that takes an argument for the package name.
The command calls the defined function which snags the config line from
the <code>mix hex.info</code> command and pastes it into the buffer.</p>

<p>The real work comes from <code>grep</code> and <code>awk</code>. We use <code>grep</code> to snag the line that
contains 'Config:' and <code>awk</code> to pull out the columns that we need.</p>

<p>Magical.</p>

</div>
<div class='post-comment'>
<div id='disqus_thread'></div>
<script>
  var disqus_shortname = 'bloomytil';
  (function() {
    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
  })();
</script>

</div>

</div>
</div>
<script src="https://code.jquery.com/jquery-2.1.1.min.js"></script>
<script src="../../../assets/javascripts/application.js"></script>
</body>
</html>
